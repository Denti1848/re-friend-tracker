import * as tslib_1 from "tslib";
import { Component, Input, Output } from "@angular/core";
import { PageElement } from "../page-element";
import { KeyUtility } from "../../../utility/key-utility";
import { Button } from "../button/button.component";
import { FocusUtility } from "../../../form/focus-utility";
import { Subject } from "rxjs";
import { debounceTime } from "rxjs/operators";
let ListComponent = class ListComponent {
    ngAfterViewInit() {
        FocusUtility.focusFirstField(null);
    }
};
tslib_1.__decorate([
    Input("list"),
    Output("list")
], ListComponent.prototype, "list", void 0);
ListComponent = tslib_1.__decorate([
    Component({
        selector: "path-list",
        template: "<!-- search on mobile devices -->\r\n<div *ngIf='list.search' class=\"search-mobile hide-on-desktop\">\r\n    <div class=\"row\">\r\n        <label for=\"search-mobile\">Search</label>\r\n        <input id=\"search-mobile\" name=\"search\" [(ngModel)]=\"list.searchText\" placeholder=\"{{list.searchInputLabel}}\" (ngModelChange)='list.filterChanged($event)' class=\"form-control\" type=\"text\">\r\n    </div>\r\n</div>\r\n<span>\r\n    <span>\r\n        <div class=\"tile-group\">\r\n            <!-- default search (tablet, desktop) -->\r\n            <div *ngIf='list.search' class=\"thumbnail {{(list.searchButton.width <= 1 ? 'tile-medium' : (list.searchButton.width == 2 ? 'tile-wide' : (list.searchButton.width == 3 ? 'tile-wide-3' : (list.searchButton.width >= 4 ? 'tile-wide-4' : ''))))}} tile tile-button hide-on-mobile {{list.searchButton.cssClass}}\" [ngStyle]=\"list.searchButton.cssStyle\">\r\n                <div class=\"input-group input-group-sm\">\r\n                    <div class=\"h3\">{{list.searchLabel}}</div>\r\n                    <i class=\"fa fa-2x fa-search\"></i>\r\n                    <div class=\"h5\"></div>\r\n                    <form>\r\n                        <input name=\"search\" [(ngModel)]=\"list.searchText\" placeholder=\"{{list.searchInputLabel}}\" (ngModelChange)='list.filterChanged($event)' class=\"form-control\" type=\"text\">\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </span>\r\n    <!-- list -->\r\n    <span *ngFor='let buttonGroup of list.buttonGroups; let i = index'>\r\n        <path-button-group [buttonGroup]=\"buttonGroup\"></path-button-group>\r\n    </span>\r\n</span>"
    })
], ListComponent);
export { ListComponent };
export class List extends PageElement {
    constructor(app, pathService, translationService) {
        super(app);
        this.pathService = pathService;
        this.translationService = translationService;
        this._buttonGroups = [];
        this._searchTextChanged = new Subject();
        this._searchLabel = translationService.getText("Search");
        this._searchInputLabel = translationService.getText("SearchInputLabel");
        this._searchButton = new Button(app, pathService, translationService);
    }
    getContent() {
        const buttons = [];
        for (const buttonGroup of this.buttonGroups) {
            buttons.push(...buttonGroup.buttons);
        }
        return buttons;
    }
    refresh(searchText, afterRefreshHandler) {
        // callback function for data
        console.log("refresh list (searchText: " + searchText + ")");
        const dataHandler = (data) => {
            this.buttonGroups = [];
            for (const item of data) {
                // create button group and buttons
                // set default types if server does not set type (button or buttonGroup)
                const itemIsButtonGroup = item.hasOwnProperty("buttons");
                if (itemIsButtonGroup) {
                    item["type"] = "buttonGroup";
                    for (const button of item.buttons) {
                        if (button["type"] == null) {
                            button["type"] = "button";
                        }
                    }
                }
                else {
                    if (item["type"] == null) {
                        item["type"] = "button";
                    }
                }
                const pageElements = this.app.createPageElement(item, this.parentPageElement, null);
                if (pageElements.length !== 1) {
                    console.log("error creating button group from: ");
                    console.log(item);
                }
                else {
                    const buttonGroup = pageElements[0];
                    let buttonCounter = 0;
                    for (const button of buttonGroup.buttons) {
                        button.listElement = true;
                        // model is either simple button or button of a group
                        let buttonModel = item;
                        if (itemIsButtonGroup) {
                            buttonModel = item.buttons[buttonCounter];
                        }
                        // build button from json
                        // use list defaults if button does not specify model
                        if (buttonModel["icon"] == null) {
                            buttonModel["icon"] = this.icon;
                        }
                        if (buttonModel["color"] == null) {
                            buttonModel["color"] = this.color;
                        }
                        if (buttonModel["page"] == null && (buttonModel["form"] == null || buttonModel["form"]["form"] == null)) {
                            // service does not return page or form, use static model
                            if (this.page != null) {
                                buttonModel["page"] = this.page;
                            }
                            if (this.form != null) {
                                buttonModel["form"] = {};
                                buttonModel.form["form"] = this.form;
                                buttonModel.form["handler"] = this.formHandler;
                            }
                        }
                        // special default width (2 instead of 1) for buttons in list
                        if (buttonModel["width"] == null) {
                            buttonModel["width"] = this.width;
                        }
                        button.fromJson(buttonModel);
                        // special values for list buttons
                        button.handler = this._buttonHandler;
                        button.name = buttonModel.name; // no translation
                        button.tooltip = buttonModel.tooltip; // no translation
                        buttonCounter++;
                    }
                    this.buttonGroups.push(buttonGroup);
                }
            }
            if (this.handler != null) {
                this.handler.doLoad(this); // TODO useful?
            }
            // refresh search
            this.filterVisibleButtonGroups();
            if (this.limit) {
                this.setSearchResultsCountMessage();
            }
            if (afterRefreshHandler != null) {
                window.setTimeout(() => {
                    afterRefreshHandler();
                }, 1);
            }
        };
        const listHandlerDoLoad = (list) => (data) => dataHandler(data);
        // backend data
        if (this._url != null) {
            let urlParameters = "";
            if (this.searchRequest || this.limit) {
                urlParameters = "?search=" + (searchText == null ? "" : encodeURI(searchText)) + "&limit=" + this.limit;
            }
            this.pathService.serverGet(this.app.getBackendUrl(), this.url + urlParameters, listHandlerDoLoad(this), null);
        }
        // mock data
        if (this._mockData != null) {
            let count = 0;
            // fake a key for mock data
            for (const mock of this.mockData) {
                count++;
                if (mock["key"] == null) {
                    mock["key"] = count;
                }
            }
            dataHandler(this.mockData);
        }
    }
    filterChanged(text) {
        this._searchTextChanged.next(text);
    }
    filter() {
        this._searchLabel = this.translationService.getText("Search");
        if (this._searchText && this._searchText === "*") {
            this.refresh(null, null);
        }
        else if (this.searchRequest) {
            // call server to filter data
            if (!this._searchText && this.searchRequired) {
                this._buttonGroups = [];
            }
            else if (this._searchText === "*" || (!this._searchText && !this.searchRequired)) {
                this.refresh(null, null);
            }
            else if (this._searchText && this._searchText.length >= 2) {
                this.refresh(this._searchText, null);
            }
            else {
                this._searchLabel = this.translationService.getText("SearchTextTooShort");
                this._buttonGroups = [];
            }
        }
        else {
            // filter loaded data only
            this.filterVisibleButtonGroups();
        }
    }
    filterVisibleButtonGroups() {
        const searchText = this._searchText ? this._searchText.toLowerCase() : "";
        for (const buttonGroup of this._buttonGroups) {
            if (searchText.length <= 0) {
                buttonGroup.visible = true;
            }
            else {
                buttonGroup.visible = false;
                for (const button of buttonGroup.buttons) {
                    if (!buttonGroup.visible) {
                        buttonGroup.visible = button.name.toLowerCase().indexOf(searchText) !== -1;
                        if (!buttonGroup.visible) {
                            for (const detail of button.details) {
                                if (detail.text.toLowerCase().indexOf(searchText) !== -1) {
                                    buttonGroup.visible = true;
                                    break;
                                }
                            }
                        }
                    }
                }
            }
        }
        if (this.visibleItemSize() !== this.buttonGroups.length) {
            this.setSearchResultsCountMessage();
        }
    }
    setSearchResultsCountMessage() {
        this._searchLabel = this.visibleItemSize() + " " +
            (this.visibleItemSize() === 1 ? this.translationService.getText("Result") : this.translationService.getText("Results"));
    }
    visibleItemSize() {
        let result = 0;
        for (const buttonGroup of this.buttonGroups) {
            if (buttonGroup.visible) {
                for (const button of buttonGroup.buttons) {
                    if (button.visible) {
                        result++;
                        break;
                    }
                }
            }
        }
        return result;
    }
    get buttonGroups() {
        return this._buttonGroups;
    }
    set buttonGroups(value) {
        this._buttonGroups = value;
    }
    get search() {
        return this._search;
    }
    set search(value) {
        this._search = value;
    }
    get handler() {
        return this._handler;
    }
    set handler(value) {
        this._handler = value;
    }
    get buttonHandler() {
        return this._buttonHandler;
    }
    set buttonHandler(value) {
        this._buttonHandler = value;
    }
    get icon() {
        return this._icon;
    }
    set icon(value) {
        this._icon = value;
    }
    get color() {
        return this._color;
    }
    set color(value) {
        this._color = value;
    }
    get form() {
        return this._form;
    }
    set form(value) {
        this._form = value;
    }
    get formHandler() {
        return this._formHandler;
    }
    set formHandler(value) {
        this._formHandler = value;
    }
    get page() {
        return this._page;
    }
    set page(value) {
        this._page = value;
    }
    get mockData() {
        return this._mockData;
    }
    set mockData(value) {
        this._mockData = value;
    }
    get url() {
        return this._url;
    }
    set url(value) {
        this._url = value;
    }
    get limit() {
        return this._limit;
    }
    set limit(value) {
        this._limit = value;
    }
    get searchRequired() {
        return this._searchRequired;
    }
    get searchRequest() {
        return this._searchRequest;
    }
    get searchText() {
        return this._searchText;
    }
    get searchLabel() {
        return this._searchLabel;
    }
    get searchInputLabel() {
        return this._searchInputLabel;
    }
    set searchLabel(value) {
        this._searchLabel = value;
    }
    set searchInputLabel(value) {
        this._searchInputLabel = value;
    }
    set searchText(value) {
        this._searchText = value;
    }
    get searchButton() {
        return this._searchButton;
    }
    fromJson(modelElement) {
        super.fromJson(modelElement);
        if (modelElement["search"] != null) {
            this.search = modelElement["search"];
        }
        if (modelElement["searchRequired"] != null) {
            this._searchRequired = modelElement["searchRequired"];
        }
        if (modelElement["searchRequest"] != null) {
            this._searchRequest = modelElement["searchRequest"];
        }
        if (modelElement["limit"] != null) {
            this.limit = modelElement["limit"];
        }
        // verify valid search combinations
        if (!this.search && this.searchRequired) {
            console.log("Configuration Error: search=false requires searchRequired=false");
            this._searchRequired = false;
        }
        if (this.searchRequired && !this.searchRequest) {
            console.log("Configuration Error: searchRequired=true requires searchRequest=true");
            this._searchRequest = true;
        }
        // other model attributes
        if (modelElement["color"] != null) {
            this.color = modelElement["color"];
        }
        if (modelElement["form"] != null) {
            this.form = modelElement["form"]["form"];
            this.formHandler = modelElement["form"]["handler"];
        }
        if (modelElement["page"] != null) {
            this.page = modelElement["page"];
        }
        if (modelElement["icon"] != null) {
            this.icon = modelElement["icon"];
        }
        if (modelElement["data"] != null) {
            this.mockData = modelElement["data"];
        }
        if (modelElement["name"] != null) {
            this.name = this.translationService.getText(modelElement["name"]);
        }
        if (modelElement["url"] != null) {
            const urlString = modelElement["url"];
            this.url = KeyUtility.translateUrl(urlString, null, false, this);
        }
        // override from PageElement
        if (modelElement["width"] != null) {
            this.width = modelElement["width"];
        }
        else {
            this.width = 2; // special default for list
        }
        // search button
        const searchButtonModel = {};
        searchButtonModel["color"] = modelElement["searchColor"] != null ? modelElement["searchColor"] : "tile-search";
        searchButtonModel["width"] = modelElement["searchWidth"] != null ? modelElement["searchWidth"] : this.width;
        this._searchButton.fromJson(searchButtonModel);
        // delay for search field
        const debounceTimeValue = this.searchRequest ? 300 : 30;
        this._searchTextChanged.pipe(debounceTime(debounceTimeValue)) // wait after the last event before emitting last event
            .subscribe(_searchText => {
            this._searchText = _searchText;
            this.filter();
        });
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGlzdC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9wYXRoLWZyYW1ld29yay8iLCJzb3VyY2VzIjpbInBhdGgtZnJhbWV3b3JrL3BhZ2UvZWxlbWVudC9saXN0L2xpc3QuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFFQSxPQUFPLEVBQWdCLFNBQVMsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFDLE1BQU0sZUFBZSxDQUFDO0FBRXRFLE9BQU8sRUFBQyxXQUFXLEVBQUMsTUFBTSxpQkFBaUIsQ0FBQztBQUU1QyxPQUFPLEVBQUMsVUFBVSxFQUFDLE1BQU0sOEJBQThCLENBQUM7QUFDeEQsT0FBTyxFQUFDLE1BQU0sRUFBQyxNQUFNLDRCQUE0QixDQUFDO0FBQ2xELE9BQU8sRUFBQyxZQUFZLEVBQUMsTUFBTSw2QkFBNkIsQ0FBQztBQUN6RCxPQUFPLEVBQUMsT0FBTyxFQUFDLE1BQU0sTUFBTSxDQUFDO0FBQzdCLE9BQU8sRUFBQyxZQUFZLEVBQUMsTUFBTSxnQkFBZ0IsQ0FBQztBQU01QyxJQUFhLGFBQWEsR0FBMUIsTUFBYSxhQUFhO0lBS3RCLGVBQWU7UUFDWCxZQUFZLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ3ZDLENBQUM7Q0FDSixDQUFBO0FBTEc7SUFGQyxLQUFLLENBQUMsTUFBTSxDQUFDO0lBQ2IsTUFBTSxDQUFDLE1BQU0sQ0FBQzsyQ0FDSjtBQUhGLGFBQWE7SUFKekIsU0FBUyxDQUFDO1FBQ1AsUUFBUSxFQUFFLFdBQVc7UUFDckIsMnFEQUFrQztLQUNyQyxDQUFDO0dBQ1csYUFBYSxDQVF6QjtTQVJZLGFBQWE7QUFVMUIsTUFBTSxPQUFPLElBQUssU0FBUSxXQUFXO0lBcUJqQyxZQUFZLEdBQWEsRUFBVSxXQUF3QixFQUFVLGtCQUFzQztRQUN2RyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7UUFEb0IsZ0JBQVcsR0FBWCxXQUFXLENBQWE7UUFBVSx1QkFBa0IsR0FBbEIsa0JBQWtCLENB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LENBQUMsV0FBVyxDQUFDLEVBQUU7WUFDckIsSUFBSSxDQUFDLFdBQVcsR0FBRyxXQUFXLENBQUM7WUFDL0IsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBQ2xCLENBQUMsQ0FBQyxDQUFDO0lBQ1gsQ0FBQztDQUNKIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtJQnV0dG9uLCBJQnV0dG9uSGFuZGxlciwgSUxpc3QsIElMaXN0SGFuZGxlciwgSVBhdGhBcHB9IGZyb20gXCIuLi8uLi8uLi9wYXRoaW50ZXJmYWNlXCI7XHJcbmltcG9ydCB7UGF0aFNlcnZpY2V9IGZyb20gXCIuLi8uLi8uLi9zZXJ2aWNlL3BhdGguc2VydmljZVwiO1xyXG5pbXBvcnQge0FmdGVyVmlld0luaXQsIENvbXBvbmVudCwgSW5wdXQsIE91dHB1dH0gZnJvbSBcIkBhbmd1bGFyL2NvcmVcIjtcclxuaW1wb3J0IHtCdXR0b25Hcm91cH0gZnJvbSBcIi4uL2J1dHRvbi1ncm91cC9idXR0b24tZ3JvdXAuY29tcG9uZW50XCI7XHJcbmltcG9ydCB7UGFnZUVsZW1lbnR9IGZyb20gXCIuLi9wYWdlLWVsZW1lbnRcIjtcclxuaW1wb3J0IHtUcmFuc2xhdGlvblNlcnZpY2V9IGZyb20gXCIuLi8uLi8uLi9zZXJ2aWNlL3RyYW5zbGF0aW9uLnNlcnZpY2VcIjtcclxuaW1wb3J0IHtLZXlVdGlsaXR5fSBmcm9tIFwiLi4vLi4vLi4vdXRpbGl0eS9rZXktdXRpbGl0eVwiO1xyXG5pbXBvcnQge0J1dHRvbn0gZnJvbSBcIi4uL2J1dHRvbi9idXR0b24uY29tcG9uZW50XCI7XHJcbmltcG9ydCB7Rm9jdXNVdGlsaXR5fSBmcm9tIFwiLi4vLi4vLi4vZm9ybS9mb2N1cy11dGlsaXR5XCI7XHJcbmltcG9ydCB7U3ViamVjdH0gZnJvbSBcInJ4anNcIjtcclxuaW1wb3J0IHtkZWJvdW5jZVRpbWV9IGZyb20gXCJyeGpzL29wZXJhdG9yc1wiO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgICBzZWxlY3RvcjogXCJwYXRoLWxpc3RcIixcclxuICAgIHRlbXBsYXRlVXJsOiBcImxpc3QuY29tcG9uZW50Lmh0bWxcIlxyXG59KVxyXG5leHBvcnQgY2xhc3MgTGlzdENvbXBvbmVudCBpbXBsZW1lbnRzIEFmdGVyVmlld0luaXQge1xyXG4gICAgQElucHV0KFwibGlzdFwiKVxyXG4gICAgQE91dHB1dChcImxpc3RcIilcclxuICAgIGxpc3Q6IExpc3Q7XHJcblxyXG4gICAgbmdBZnRlclZpZXdJbml0KCkge1xyXG4gICAgICAgIEZvY3VzVXRpbGl0eS5mb2N1c0ZpcnN0RmllbGQobnVsbCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBMaXN0IGV4dGVuZHMgUGFnZUVsZW1lbnQgaW1wbGVtZW50cyBJTGlzdCB7XHJcbiAgICBwcml2YXRlIF9idXR0b25Hcm91cHM6IEJ1dHRvbkdyb3VwW10gPSBbXTtcclxuICAgIHByaXZhdGUgX3NlYXJjaDogYm9vbGVhbjtcclxuICAgIHByaXZhdGUgX2xpbWl0OiBudW1iZXI7XHJcbiAgICBwcml2YXRlIF9zZWFyY2hSZXF1aXJlZDogYm9vbGVhbjtcclxuICAgIHByaXZhdGUgX3NlYXJjaFJlcXVlc3Q6IGJvb2xlYW47XHJcbiAgICBwcml2YXRlIF9zZWFyY2hMYWJlbDogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBfc2VhcmNoSW5wdXRMYWJlbDogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBfc2VhcmNoVGV4dDogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBfc2VhcmNoVGV4dENoYW5nZWQ6IFN1YmplY3Q8c3RyaW5nPiA9IG5ldyBTdWJqZWN0PHN0cmluZz4oKTtcclxuICAgIHByaXZhdGUgX3NlYXJjaEJ1dHRvbjogQnV0dG9uO1xyXG4gICAgcHJpdmF0ZSBfaGFuZGxlcjogSUxpc3RIYW5kbGVyO1xyXG4gICAgcHJpdmF0ZSBfYnV0dG9uSGFuZGxlcjogSUJ1dHRvbkhhbmRsZXI7XHJcbiAgICBwcml2YXRlIF9pY29uOiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIF9jb2xvcjogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBfZm9ybTogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBfZm9ybUhhbmRsZXI6IHN0cmluZztcclxuICAgIHByaXZhdGUgX3BhZ2U6IHN0cmluZztcclxuICAgIHByaXZhdGUgX21vY2tEYXRhOiBhbnk7XHJcbiAgICBwcml2YXRlIF91cmw6IHN0cmluZztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhcHA6IElQYXRoQXBwLCBwcml2YXRlIHBhdGhTZXJ2aWNlOiBQYXRoU2VydmljZSwgcHJpdmF0ZSB0cmFuc2xhdGlvblNlcnZpY2U6IFRyYW5zbGF0aW9uU2VydmljZSkge1xyXG4gICAgICAgIHN1cGVyKGFwcCk7XHJcbiAgICAgICAgdGhpcy5fc2VhcmNoTGFiZWwgPSB0cmFuc2xhdGlvblNlcnZpY2UuZ2V0VGV4dChcIlNlYXJjaFwiKTtcclxuICAgICAgICB0aGlzLl9zZWFyY2hJbnB1dExhYmVsID0gdHJhbnNsYXRpb25TZXJ2aWNlLmdldFRleHQoXCJTZWFyY2hJbnB1dExhYmVsXCIpO1xyXG4gICAgICAgIHRoaXMuX3NlYXJjaEJ1dHRvbiA9IG5ldyBCdXR0b24oYXBwLCBwYXRoU2VydmljZSwgdHJhbnNsYXRpb25TZXJ2aWNlKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0Q29udGVudCgpOiBJQnV0dG9uW10ge1xyXG4gICAgICAgIGNvbnN0IGJ1dHRvbnM6IEJ1dHRvbltdID0gW107XHJcbiAgICAgICAgZm9yIChjb25zdCBidXR0b25Hcm91cCBvZiB0aGlzLmJ1dHRvbkdyb3Vwcykge1xyXG4gICAgICAgICAgICBidXR0b25zLnB1c2goLi4uYnV0dG9uR3JvdXAuYnV0dG9ucyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBidXR0b25zO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZWZyZXNoKHNlYXJjaFRleHQ6IHN0cmluZywgYWZ0ZXJSZWZyZXNoSGFuZGxlcjogKCkgPT4gdm9pZCkge1xyXG4gICAgICAgIC8vIGNhbGxiYWNrIGZ1bmN0aW9uIGZvciBkYXRhXHJcbiAgICAgICAgY29uc29sZS5sb2coXCJyZWZyZXNoIGxpc3QgKHNlYXJjaFRleHQ6IFwiICsgc2VhcmNoVGV4dCArIFwiKVwiKTtcclxuICAgICAgICBjb25zdCBkYXRhSGFuZGxlciA9IChkYXRhOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5idXR0b25Hcm91cHMgPSBbXTtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIC8vIGNyZWF0ZSBidXR0b24gZ3JvdXAgYW5kIGJ1dHRvbnNcclxuICAgICAgICAgICAgICAgIC8vIHNldCBkZWZhdWx0IHR5cGVzIGlmIHNlcnZlciBkb2VzIG5vdCBzZXQgdHlwZSAoYnV0dG9uIG9yIGJ1dHRvbkdyb3VwKVxyXG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbUlzQnV0dG9uR3JvdXA6IGJvb2xlYW4gPSBpdGVtLmhhc093blByb3BlcnR5KFwiYnV0dG9uc1wiKTtcclxuICAgICAgICAgICAgICAgIGlmIChpdGVtSXNCdXR0b25Hcm91cCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1bXCJ0eXBlXCJdID0gXCJidXR0b25Hcm91cFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgYnV0dG9uIG9mIGl0ZW0uYnV0dG9ucykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYnV0dG9uW1widHlwZVwiXSA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b25bXCJ0eXBlXCJdID0gXCJidXR0b25cIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW1bXCJ0eXBlXCJdID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbVtcInR5cGVcIl0gPSBcImJ1dHRvblwiO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnN0IHBhZ2VFbGVtZW50cyA9IHRoaXMuYXBwLmNyZWF0ZVBhZ2VFbGVtZW50KGl0ZW0sIHRoaXMucGFyZW50UGFnZUVsZW1lbnQsIG51bGwpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHBhZ2VFbGVtZW50cy5sZW5ndGggIT09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImVycm9yIGNyZWF0aW5nIGJ1dHRvbiBncm91cCBmcm9tOiBcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coaXRlbSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJ1dHRvbkdyb3VwID0gPEJ1dHRvbkdyb3VwPnBhZ2VFbGVtZW50c1swXTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgYnV0dG9uQ291bnRlciA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBidXR0b24gb2YgYnV0dG9uR3JvdXAuYnV0dG9ucykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b24ubGlzdEVsZW1lbnQgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbW9kZWwgaXMgZWl0aGVyIHNpbXBsZSBidXR0b24gb3IgYnV0dG9uIG9mIGEgZ3JvdXBcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGJ1dHRvbk1vZGVsID0gaXRlbTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW1Jc0J1dHRvbkdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b25Nb2RlbCA9IGl0ZW0uYnV0dG9uc1tidXR0b25Db3VudGVyXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYnVpbGQgYnV0dG9uIGZyb20ganNvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB1c2UgbGlzdCBkZWZhdWx0cyBpZiBidXR0b24gZG9lcyBub3Qgc3BlY2lmeSBtb2RlbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYnV0dG9uTW9kZWxbXCJpY29uXCJdID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbk1vZGVsW1wiaWNvblwiXSA9IHRoaXMuaWNvbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYnV0dG9uTW9kZWxbXCJjb2xvclwiXSA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b25Nb2RlbFtcImNvbG9yXCJdID0gdGhpcy5jb2xvcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYnV0dG9uTW9kZWxbXCJwYWdlXCJdID09IG51bGwgJiYgKGJ1dHRvbk1vZGVsW1wiZm9ybVwiXSA9PSBudWxsIHx8IGJ1dHRvbk1vZGVsW1wiZm9ybVwiXVtcImZvcm1cIl0gPT0gbnVsbCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNlcnZpY2UgZG9lcyBub3QgcmV0dXJuIHBhZ2Ugb3IgZm9ybSwgdXNlIHN0YXRpYyBtb2RlbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGFnZSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uTW9kZWxbXCJwYWdlXCJdID0gdGhpcy5wYWdlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZm9ybSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uTW9kZWxbXCJmb3JtXCJdID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uTW9kZWwuZm9ybVtcImZvcm1cIl0gPSB0aGlzLmZvcm07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uTW9kZWwuZm9ybVtcImhhbmRsZXJcIl0gPSB0aGlzLmZvcm1IYW5kbGVyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNwZWNpYWwgZGVmYXVsdCB3aWR0aCAoMiBpbnN0ZWFkIG9mIDEpIGZvciBidXR0b25zIGluIGxpc3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJ1dHRvbk1vZGVsW1wid2lkdGhcIl0gPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uTW9kZWxbXCJ3aWR0aFwiXSA9IHRoaXMud2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLmZyb21Kc29uKGJ1dHRvbk1vZGVsKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNwZWNpYWwgdmFsdWVzIGZvciBsaXN0IGJ1dHRvbnNcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLmhhbmRsZXIgPSB0aGlzLl9idXR0b25IYW5kbGVyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b24ubmFtZSA9IGJ1dHRvbk1vZGVsLm5hbWU7IC8vIG5vIHRyYW5zbGF0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi50b29sdGlwID0gYnV0dG9uTW9kZWwudG9vbHRpcDsgLy8gbm8gdHJhbnNsYXRpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uQ291bnRlcisrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmJ1dHRvbkdyb3Vwcy5wdXNoKGJ1dHRvbkdyb3VwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5oYW5kbGVyICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlci5kb0xvYWQodGhpcyk7IC8vIFRPRE8gdXNlZnVsP1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIHJlZnJlc2ggc2VhcmNoXHJcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyVmlzaWJsZUJ1dHRvbkdyb3VwcygpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5saW1pdCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTZWFyY2hSZXN1bHRzQ291bnRNZXNzYWdlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGFmdGVyUmVmcmVzaEhhbmRsZXIgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGFmdGVyUmVmcmVzaEhhbmRsZXIoKTtcclxuICAgICAgICAgICAgICAgIH0sIDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBjb25zdCBsaXN0SGFuZGxlckRvTG9hZCA9IChsaXN0OiBJTGlzdCkgPT4gKGRhdGE6IGFueSkgPT4gZGF0YUhhbmRsZXIoZGF0YSk7XHJcbiAgICAgICAgLy8gYmFja2VuZCBkYXRhXHJcbiAgICAgICAgaWYgKHRoaXMuX3VybCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIGxldCB1cmxQYXJhbWV0ZXJzID0gXCJcIjtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2VhcmNoUmVxdWVzdCB8fCB0aGlzLmxpbWl0KSB7XHJcbiAgICAgICAgICAgICAgICB1cmxQYXJhbWV0ZXJzID0gXCI/c2VhcmNoPVwiICsgKHNlYXJjaFRleHQgPT0gbnVsbCA/IFwiXCIgOiBlbmNvZGVVUkkoc2VhcmNoVGV4dCkpICsgXCImbGltaXQ9XCIgKyB0aGlzLmxpbWl0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMucGF0aFNlcnZpY2Uuc2VydmVyR2V0KHRoaXMuYXBwLmdldEJhY2tlbmRVcmwoKSwgdGhpcy51cmwgKyB1cmxQYXJhbWV0ZXJzLCBsaXN0SGFuZGxlckRvTG9hZCh0aGlzKSwgbnVsbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIG1vY2sgZGF0YVxyXG4gICAgICAgIGlmICh0aGlzLl9tb2NrRGF0YSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIGxldCBjb3VudCA9IDA7XHJcbiAgICAgICAgICAgIC8vIGZha2UgYSBrZXkgZm9yIG1vY2sgZGF0YVxyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IG1vY2sgb2YgdGhpcy5tb2NrRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgY291bnQrKztcclxuICAgICAgICAgICAgICAgIGlmIChtb2NrW1wia2V5XCJdID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBtb2NrW1wia2V5XCJdID0gY291bnQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZGF0YUhhbmRsZXIodGhpcy5tb2NrRGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBmaWx0ZXJDaGFuZ2VkKHRleHQ6IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMuX3NlYXJjaFRleHRDaGFuZ2VkLm5leHQodGV4dCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGZpbHRlcigpIHtcclxuICAgICAgICB0aGlzLl9zZWFyY2hMYWJlbCA9IHRoaXMudHJhbnNsYXRpb25TZXJ2aWNlLmdldFRleHQoXCJTZWFyY2hcIik7XHJcbiAgICAgICAgaWYgKHRoaXMuX3NlYXJjaFRleHQgJiYgdGhpcy5fc2VhcmNoVGV4dCA9PT0gXCIqXCIpIHtcclxuICAgICAgICAgICAgdGhpcy5yZWZyZXNoKG51bGwsIG51bGwpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5zZWFyY2hSZXF1ZXN0KSB7XHJcbiAgICAgICAgICAgIC8vIGNhbGwgc2VydmVyIHRvIGZpbHRlciBkYXRhXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5fc2VhcmNoVGV4dCAmJiB0aGlzLnNlYXJjaFJlcXVpcmVkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9idXR0b25Hcm91cHMgPSBbXTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9zZWFyY2hUZXh0ID09PSBcIipcIiB8fCAoIXRoaXMuX3NlYXJjaFRleHQgJiYgIXRoaXMuc2VhcmNoUmVxdWlyZWQpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2gobnVsbCwgbnVsbCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5fc2VhcmNoVGV4dCAmJiB0aGlzLl9zZWFyY2hUZXh0Lmxlbmd0aCA+PSAyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2godGhpcy5fc2VhcmNoVGV4dCwgbnVsbCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zZWFyY2hMYWJlbCA9IHRoaXMudHJhbnNsYXRpb25TZXJ2aWNlLmdldFRleHQoXCJTZWFyY2hUZXh0VG9vU2hvcnRcIik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9idXR0b25Hcm91cHMgPSBbXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIGZpbHRlciBsb2FkZWQgZGF0YSBvbmx5XHJcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyVmlzaWJsZUJ1dHRvbkdyb3VwcygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGZpbHRlclZpc2libGVCdXR0b25Hcm91cHMoKSB7XHJcbiAgICAgICAgY29uc3Qgc2VhcmNoVGV4dDogc3RyaW5nID0gdGhpcy5fc2VhcmNoVGV4dCA/IHRoaXMuX3NlYXJjaFRleHQudG9Mb3dlckNhc2UoKSA6IFwiXCI7XHJcbiAgICAgICAgZm9yIChjb25zdCBidXR0b25Hcm91cCBvZiB0aGlzLl9idXR0b25Hcm91cHMpIHtcclxuICAgICAgICAgICAgaWYgKHNlYXJjaFRleHQubGVuZ3RoIDw9IDApIHtcclxuICAgICAgICAgICAgICAgIGJ1dHRvbkdyb3VwLnZpc2libGUgPSB0cnVlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYnV0dG9uR3JvdXAudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBidXR0b24gb2YgYnV0dG9uR3JvdXAuYnV0dG9ucykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghYnV0dG9uR3JvdXAudmlzaWJsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b25Hcm91cC52aXNpYmxlID0gYnV0dG9uLm5hbWUudG9Mb3dlckNhc2UoKS5pbmRleE9mKHNlYXJjaFRleHQpICE9PSAtMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFidXR0b25Hcm91cC52aXNpYmxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGRldGFpbCBvZiBidXR0b24uZGV0YWlscykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZXRhaWwudGV4dC50b0xvd2VyQ2FzZSgpLmluZGV4T2Yoc2VhcmNoVGV4dCkgIT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbkdyb3VwLnZpc2libGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMudmlzaWJsZUl0ZW1TaXplKCkgIT09IHRoaXMuYnV0dG9uR3JvdXBzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFNlYXJjaFJlc3VsdHNDb3VudE1lc3NhZ2UoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZXRTZWFyY2hSZXN1bHRzQ291bnRNZXNzYWdlKCkge1xyXG4gICAgICAgIHRoaXMuX3NlYXJjaExhYmVsID0gdGhpcy52aXNpYmxlSXRlbVNpemUoKSArIFwiIFwiICtcclxuICAgICAgICAgICAgKHRoaXMudmlzaWJsZUl0ZW1TaXplKCkgPT09IDEgPyB0aGlzLnRyYW5zbGF0aW9uU2VydmljZS5nZXRUZXh0KFwiUmVzdWx0XCIpIDogdGhpcy50cmFuc2xhdGlvblNlcnZpY2UuZ2V0VGV4dChcIlJlc3VsdHNcIikpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdmlzaWJsZUl0ZW1TaXplKCk6IG51bWJlciB7XHJcbiAgICAgICAgbGV0IHJlc3VsdCA9IDA7XHJcbiAgICAgICAgZm9yIChjb25zdCBidXR0b25Hcm91cCBvZiB0aGlzLmJ1dHRvbkdyb3Vwcykge1xyXG4gICAgICAgICAgICBpZiAoYnV0dG9uR3JvdXAudmlzaWJsZSkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBidXR0b24gb2YgYnV0dG9uR3JvdXAuYnV0dG9ucykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChidXR0b24udmlzaWJsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGJ1dHRvbkdyb3VwcygpOiBCdXR0b25Hcm91cFtdIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fYnV0dG9uR3JvdXBzO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBidXR0b25Hcm91cHModmFsdWU6IEJ1dHRvbkdyb3VwW10pIHtcclxuICAgICAgICB0aGlzLl9idXR0b25Hcm91cHMgPSB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgc2VhcmNoKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zZWFyY2g7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IHNlYXJjaCh2YWx1ZTogYm9vbGVhbikge1xyXG4gICAgICAgIHRoaXMuX3NlYXJjaCA9IHZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBoYW5kbGVyKCk6IElMaXN0SGFuZGxlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2hhbmRsZXI7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IGhhbmRsZXIodmFsdWU6IElMaXN0SGFuZGxlcikge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZXIgPSB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgYnV0dG9uSGFuZGxlcigpOiBJQnV0dG9uSGFuZGxlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2J1dHRvbkhhbmRsZXI7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IGJ1dHRvbkhhbmRsZXIodmFsdWU6IElCdXR0b25IYW5kbGVyKSB7XHJcbiAgICAgICAgdGhpcy5fYnV0dG9uSGFuZGxlciA9IHZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBpY29uKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ljb247XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IGljb24odmFsdWU6IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMuX2ljb24gPSB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgY29sb3IoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY29sb3I7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IGNvbG9yKHZhbHVlOiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLl9jb2xvciA9IHZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBmb3JtKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Zvcm07XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IGZvcm0odmFsdWU6IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMuX2Zvcm0gPSB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgZm9ybUhhbmRsZXIoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZm9ybUhhbmRsZXI7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IGZvcm1IYW5kbGVyKHZhbHVlOiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLl9mb3JtSGFuZGxlciA9IHZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBwYWdlKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BhZ2U7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IHBhZ2UodmFsdWU6IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMuX3BhZ2UgPSB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgbW9ja0RhdGEoKTogYW55IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbW9ja0RhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IG1vY2tEYXRhKHZhbHVlOiBhbnkpIHtcclxuICAgICAgICB0aGlzLl9tb2NrRGF0YSA9IHZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCB1cmwoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdXJsO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCB1cmwodmFsdWU6IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMuX3VybCA9IHZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBsaW1pdCgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9saW1pdDtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgbGltaXQodmFsdWU6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuX2xpbWl0ID0gdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHNlYXJjaFJlcXVpcmVkKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zZWFyY2hSZXF1aXJlZDtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgc2VhcmNoUmVxdWVzdCgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc2VhcmNoUmVxdWVzdDtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgc2VhcmNoVGV4dCgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zZWFyY2hUZXh0O1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBzZWFyY2hMYWJlbCgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zZWFyY2hMYWJlbDtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgc2VhcmNoSW5wdXRMYWJlbCgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zZWFyY2hJbnB1dExhYmVsO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBzZWFyY2hMYWJlbCh2YWx1ZTogc3RyaW5nKSB7XHJcbiAgICAgICAgdGhpcy5fc2VhcmNoTGFiZWwgPSB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgc2VhcmNoSW5wdXRMYWJlbCh2YWx1ZTogc3RyaW5nKSB7XHJcbiAgICAgICAgdGhpcy5fc2VhcmNoSW5wdXRMYWJlbCA9IHZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBzZWFyY2hUZXh0KHZhbHVlOiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLl9zZWFyY2hUZXh0ID0gdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHNlYXJjaEJ1dHRvbigpOiBCdXR0b24ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zZWFyY2hCdXR0b247XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGZyb21Kc29uKG1vZGVsRWxlbWVudCkge1xyXG4gICAgICAgIHN1cGVyLmZyb21Kc29uKG1vZGVsRWxlbWVudCk7XHJcbiAgICAgICAgaWYgKG1vZGVsRWxlbWVudFtcInNlYXJjaFwiXSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoID0gbW9kZWxFbGVtZW50W1wic2VhcmNoXCJdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobW9kZWxFbGVtZW50W1wic2VhcmNoUmVxdWlyZWRcIl0gIT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLl9zZWFyY2hSZXF1aXJlZCA9IG1vZGVsRWxlbWVudFtcInNlYXJjaFJlcXVpcmVkXCJdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobW9kZWxFbGVtZW50W1wic2VhcmNoUmVxdWVzdFwiXSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3NlYXJjaFJlcXVlc3QgPSBtb2RlbEVsZW1lbnRbXCJzZWFyY2hSZXF1ZXN0XCJdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobW9kZWxFbGVtZW50W1wibGltaXRcIl0gIT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLmxpbWl0ID0gbW9kZWxFbGVtZW50W1wibGltaXRcIl07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIHZlcmlmeSB2YWxpZCBzZWFyY2ggY29tYmluYXRpb25zXHJcbiAgICAgICAgaWYgKCF0aGlzLnNlYXJjaCAmJiB0aGlzLnNlYXJjaFJlcXVpcmVkKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQ29uZmlndXJhdGlvbiBFcnJvcjogc2VhcmNoPWZhbHNlIHJlcXVpcmVzIHNlYXJjaFJlcXVpcmVkPWZhbHNlXCIpO1xyXG4gICAgICAgICAgICB0aGlzLl9zZWFyY2hSZXF1aXJlZCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5zZWFyY2hSZXF1aXJlZCAmJiAhdGhpcy5zZWFyY2hSZXF1ZXN0KSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQ29uZmlndXJhdGlvbiBFcnJvcjogc2VhcmNoUmVxdWlyZWQ9dHJ1ZSByZXF1aXJlcyBzZWFyY2hSZXF1ZXN0PXRydWVcIik7XHJcbiAgICAgICAgICAgIHRoaXMuX3NlYXJjaFJlcXVlc3QgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBvdGhlciBtb2RlbCBhdHRyaWJ1dGVzXHJcbiAgICAgICAgaWYgKG1vZGVsRWxlbWVudFtcImNvbG9yXCJdICE9IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5jb2xvciA9IG1vZGVsRWxlbWVudFtcImNvbG9yXCJdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobW9kZWxFbGVtZW50W1wiZm9ybVwiXSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZm9ybSA9IG1vZGVsRWxlbWVudFtcImZvcm1cIl1bXCJmb3JtXCJdO1xyXG4gICAgICAgICAgICB0aGlzLmZvcm1IYW5kbGVyID0gbW9kZWxFbGVtZW50W1wiZm9ybVwiXVtcImhhbmRsZXJcIl07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChtb2RlbEVsZW1lbnRbXCJwYWdlXCJdICE9IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5wYWdlID0gbW9kZWxFbGVtZW50W1wicGFnZVwiXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG1vZGVsRWxlbWVudFtcImljb25cIl0gIT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLmljb24gPSBtb2RlbEVsZW1lbnRbXCJpY29uXCJdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobW9kZWxFbGVtZW50W1wiZGF0YVwiXSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMubW9ja0RhdGEgPSBtb2RlbEVsZW1lbnRbXCJkYXRhXCJdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobW9kZWxFbGVtZW50W1wibmFtZVwiXSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMubmFtZSA9IHRoaXMudHJhbnNsYXRpb25TZXJ2aWNlLmdldFRleHQobW9kZWxFbGVtZW50W1wibmFtZVwiXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChtb2RlbEVsZW1lbnRbXCJ1cmxcIl0gIT0gbnVsbCkge1xyXG4gICAgICAgICAgICBjb25zdCB1cmxTdHJpbmc6IHN0cmluZyA9IG1vZGVsRWxlbWVudFtcInVybFwiXTtcclxuICAgICAgICAgICAgdGhpcy51cmwgPSBLZXlVdGlsaXR5LnRyYW5zbGF0ZVVybCh1cmxTdHJpbmcsIG51bGwsIGZhbHNlLCB0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gb3ZlcnJpZGUgZnJvbSBQYWdlRWxlbWVudFxyXG4gICAgICAgIGlmIChtb2RlbEVsZW1lbnRbXCJ3aWR0aFwiXSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMud2lkdGggPSBtb2RlbEVsZW1lbnRbXCJ3aWR0aFwiXTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLndpZHRoID0gMjsgLy8gc3BlY2lhbCBkZWZhdWx0IGZvciBsaXN0XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIHNlYXJjaCBidXR0b25cclxuICAgICAgICBjb25zdCBzZWFyY2hCdXR0b25Nb2RlbCA9IHt9O1xyXG4gICAgICAgIHNlYXJjaEJ1dHRvbk1vZGVsW1wiY29sb3JcIl0gPSBtb2RlbEVsZW1lbnRbXCJzZWFyY2hDb2xvclwiXSAhPSBudWxsID8gbW9kZWxFbGVtZW50W1wic2VhcmNoQ29sb3JcIl0gOiBcInRpbGUtc2VhcmNoXCI7XHJcbiAgICAgICAgc2VhcmNoQnV0dG9uTW9kZWxbXCJ3aWR0aFwiXSA9IG1vZGVsRWxlbWVudFtcInNlYXJjaFdpZHRoXCJdICE9IG51bGwgPyBtb2RlbEVsZW1lbnRbXCJzZWFyY2hXaWR0aFwiXSA6IHRoaXMud2lkdGg7XHJcbiAgICAgICAgdGhpcy5fc2VhcmNoQnV0dG9uLmZyb21Kc29uKHNlYXJjaEJ1dHRvbk1vZGVsKTtcclxuICAgICAgICAvLyBkZWxheSBmb3Igc2VhcmNoIGZpZWxkXHJcbiAgICAgICAgY29uc3QgZGVib3VuY2VUaW1lVmFsdWU6IG51bWJlciA9IHRoaXMuc2VhcmNoUmVxdWVzdCA/IDMwMCA6IDMwO1xyXG4gICAgICAgIHRoaXMuX3NlYXJjaFRleHRDaGFuZ2VkLnBpcGUoXHJcbiAgICAgICAgICAgIGRlYm91bmNlVGltZShkZWJvdW5jZVRpbWVWYWx1ZSkpIC8vIHdhaXQgYWZ0ZXIgdGhlIGxhc3QgZXZlbnQgYmVmb3JlIGVtaXR0aW5nIGxhc3QgZXZlbnRcclxuICAgICAgICAgICAgLnN1YnNjcmliZShfc2VhcmNoVGV4dCA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zZWFyY2hUZXh0ID0gX3NlYXJjaFRleHQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlcigpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG4iXX0=